<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>لعبة إطلاق النار الاحترافية</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(to bottom, #0f2027, #203a43, #2c5364);
    overflow: hidden;
    color: #fff;
    touch-action: none;
  }
  canvas {
    display: block;
    background: linear-gradient(to bottom, #111, #333);
    margin: auto;
  }
  #score {
    position: absolute;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 28px;
    font-weight: bold;
    color: #ffd700;
    text-shadow: 0 0 10px #ffd700;
  }
</style>
</head>
<body>

<div id="score">النقاط: 0</div>
<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

// ضبط المقاسات لتناسب الشاشة
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// المتغيرات
let score = 0;
const player = {
    x: canvas.width * 0.1,
    y: canvas.height/2,
    width: 60,
    height: 60,
    color: '#00ffff',
    speed: 7
};
let bullets = [];
let enemies = [];

// التحكم باللمس (للأجهزة المحمولة)
let touchY = null;
canvas.addEventListener('touchstart', e => {
    touchY = e.touches[0].clientY;
    shoot();
});
canvas.addEventListener('touchmove', e => {
    const y = e.touches[0].clientY;
    player.y += (y - touchY);
    if(player.y < 0) player.y = 0;
    if(player.y + player.height > canvas.height) player.y = canvas.height - player.height;
    touchY = y;
});

// إطلاق النار
function shoot() {
    bullets.push({
        x: player.x + player.width,
        y: player.y + player.height/2 - 10,
        width: 20,
        height: 20,
        color: '#ffeb3b',
        speed: 12
    });
}

// إنشاء الأعداء
function spawnEnemy() {
    const y = Math.random() * (canvas.height - 70);
    enemies.push({
        x: canvas.width + 60,
        y: y,
        width: 60,
        height: 60,
        color: '#ff3d00',
        speed: 4 + Math.random() * 3
    });
}

// التحديث
function update() {
    // تحديث الرصاصات
    bullets.forEach((b,i) => {
        b.x += b.speed;
        if(b.x > canvas.width) bullets.splice(i,1);
    });

    // تحديث الأعداء
    enemies.forEach((e,i) => {
        e.x -= e.speed;
        if(e.x + e.width < 0) enemies.splice(i,1);
    });

    // التصادم بين الرصاصات والأعداء
    bullets.forEach((b, bi) => {
        enemies.forEach((e, ei) => {
            if(b.x < e.x + e.width &&
               b.x + b.width > e.x &&
               b.y < e.y + e.height &&
               b.y + b.height > e.y) {
                   bullets.splice(bi,1);
                   enemies.splice(ei,1);
                   score += 10;
                   document.getElementById('score').innerText = "النقاط: " + score;
            }
        });
    });

    // التصادم بين اللاعب والأعداء
    enemies.forEach(e => {
        if(player.x < e.x + e.width &&
           player.x + player.width > e.x &&
           player.y < e.y + e.height &&
           player.y + player.height > e.y) {
               alert('انتهت اللعبة! نقاطك: ' + score);
               document.location.reload();
        }
    });

    // إنشاء أعداء بشكل عشوائي
    if(Math.random() < 0.03) spawnEnemy();
}

// الرسم
function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // اللاعب مع تأثير تدرج لامع
    let gradient = ctx.createLinearGradient(player.x, player.y, player.x+player.width, player.y+player.height);
    gradient.addColorStop(0, '#00ffff');
    gradient.addColorStop(1, '#00ff90');
    ctx.fillStyle = gradient;
    ctx.fillRect(player.x, player.y, player.width, player.height);

    // الرصاصات مع توهج
    bullets.forEach(b => {
        ctx.shadowBlur = 10;
        ctx.shadowColor = b.color;
        ctx.fillStyle = b.color;
        ctx.fillRect(b.x, b.y, b.width, b.height);
        ctx.shadowBlur = 0;
    });

    // الأعداء مع تأثير تدرج أحمر
    enemies.forEach(e => {
        let grad = ctx.createLinearGradient(e.x, e.y, e.x+e.width, e.y+e.height);
        grad.addColorStop(0, '#ff3d00');
        grad.addColorStop(1, '#ff9100');
        ctx.fillStyle = grad;
        ctx.fillRect(e.x, e.y, e.width, e.height);
    });
}

// حلقة اللعبة
function gameLoop() {
    update();
    draw();
    requestAnimationFrame(gameLoop);
}

// بدء اللعبة
gameLoop();

// إعادة ضبط المقاسات عند تغيير حجم الشاشة
window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    player.y = canvas.height/2;
});
</script>

</body>
</html>